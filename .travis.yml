language: python
python:
  - 3.7
  - 3.8
before_install:
  - python --version
  - pip install -U pip
  - pip install -U conan
  - pip install codecov
  - export PYPHYSX_COV=true
install:
  - python setup.py build
script:
  - $(shell export PYTHONPATH=$PYTHONPATH:$(pwd)/build/lib.linux-x86_64-$TRAVIS_PYTHON_VERSION)
  - cd build/temp.linux-x86_64-$TRAVIS_PYTHON_VERSION
  - pytest tests
  - make gcov
after_success:
  - codecov -X gcov
